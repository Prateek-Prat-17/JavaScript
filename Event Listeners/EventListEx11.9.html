<!doctype html>
<html>

<head>
    <title>Event Listener Ex 11.9</title>
    <style>
        .box {
            width: 100px;
            height: 100px;
            border: 1px solid black;
            background-color: white;
        }

        .rgb {
            background-color: rgb(46, 124, 192);
        }
    </style>
</head>

<body>
    <div class="box">1
        <div id="dragme" draggable="true">
            Drag Me Please!
        </div>
    </div>
    <div class="box">2</div>
    <div class="box">3</div>
    <script>
        //Storing the Dragme text & boxes in a variable
        dragItem = document.getElementById("dragme");
        dropBox = document.querySelectorAll(".box");
        //Defining a style opacity at start of drag
        dragItem.addEventListener("dragstart", function () {
            this.style.opacity = 0.5;
        });
        //Restore the style opacity at end of drag
        dragItem.addEventListener("dragend", function () {
            this.style.opacity = 1;
        });
        //Running forEach loop when dragenter is defined it will remove the bg colour
        dropBox.forEach(element => {
            element.addEventListener("dragenter", function () {
                this.classList.remove("rgb");
            })
            //event.preventDefault with dragover allow for the drop without this drop is not possible
            element.addEventListener("dragover", function () {
                event.preventDefault();
            })
            //After dropping the element we add the bg colour with the text "Drag me please"
            element.addEventListener("drop", function (event) {
                event.preventDefault();
                this.classList.add("rgb"); 
                this.appendChild(dragItem); // move draggable into this box
            });

        });


    </script>
</body>

</html>